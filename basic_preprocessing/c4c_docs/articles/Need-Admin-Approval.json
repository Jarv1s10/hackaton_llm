{
    "site_name": "SAP Cloud for Customer Server-Side Integration (SSI)",
    "short_site_name": "C4C",
    "doc_dir": "articles/Need-Admin-Approval.md",
    "doc_url": "https://revenuegrid.com/ssi/docs/kb/articles/Need-Admin-Approval",
    "title": null,
    "full_content": "# How to Resolve the \"Need Admin Approval\" Error\n\n&nbsp;\n\nThe \"Need Admin Approval\" error may occur when a standard user attempts to authenticate their Office 365 mailbox into SSI:\n\n<p>\n    <img src=\"..\\..\\assets\\images\\Troubleshooting\\need-approval1.png\">\n</p>\n\n&nbsp;\n\n!!! warning \"Important\"\n    An important server-side prerequisite must be clarified with your local Admin or [SSI Support team](https://support.sap.com/en/contact-us.html). To be able to authenticate access, your company's Office 365 server must have a [valid MPN ID from Microsoft](https://docs.microsoft.com/en-us/partner-center/mpn-create-a-partner-center-account). If no MPN ID is configured, SSI App might be regarded as *unverified*, and for this reason, it will not be listed among access consent Apps in Admin settings\n\n&nbsp;\n\nThe error is caused by User permission settings in corporate [MS Azure Active Directory](https://azure.microsoft.com/en-us/services/active-directory/), where the option \"*User can consent to apps accessing company data on their behalf*\" is set to \"*No*\", along with its derivative setting for accessing the groups' data. \n&nbsp;\n\nThese settings are located in **All services** > **Enterprise applications** > **User settings** in MS Azure Active Directory.\n\n<p>\n    <img src=\"..\\..\\assets\\images\\Troubleshooting\\need-approval2.png\">\n</p>\n\n&nbsp;\n\n* * *\n\n&nbsp;\n\n## Problem solutions\n\n### Method 1\n\nTo resolve the issue, the local Office 365 Admin can consent for the App on the initial login. This method requires the O365 Admin to be an SAP Cloud for Customer user also [provisioned as an SSI user](../How-to-Configure-Admin/).\n\n&nbsp;\n\nAdmin should perform the following configuration actions:\n\n**1\\.** Log in to SAP Cloud for Customer with Office 365 Admin account credentials\n\n**2\\.** Go to **E-Mail Integration** (1) > **User Settings** (2) > **Sync Settings** (3) > **E-Mail Configuration** (4) and click **Change** (5) in the bottom right corner\n\n<p>\n    <img src=\"..\\..\\assets\\images\\User\\1.png\">\n</p>\n\n&nbsp;\n\n**3\\.** A [standard Office 365 OAuth dialog](https://docs.microsoft.com/en-us/azure/active-directory/develop/active-directory-v2-protocols) will be opened in your browser. Log in with Office 365 Admin credentials\n\n**4\\.** In the following \"*Permissions Requested*\" dialog window, select the checkbox **Consent on behalf of your organization** and click **Accept**\n\n<p>\n    <img src=\"..\\..\\assets\\images\\Troubleshooting\\need-approval8.png\">\n</p>\n\n&nbsp;\n\n**5\\.** You will see a confirmation message \"Signed in successfully\"\n\nNow consent to use the App has been granted for the whole Office 365 Org, and all end users can authenticate their Office 365 mailbox into SSI.\n\n&nbsp;\n\n**An optional extra step:**\n\nIn case Office 365 Admin does not intend to use Server-Side Integration afterward, a \"Reset mailbox\" procedure can be executed for their account in [SSI \"Groupware Settings\" tab](../How-to-Configure-Admin/), or they can be [unprovisioned from SSI](../How-to-Configure-Admin/#24_user_provisioning).\n\n&nbsp;\n\n* * *\n\n&nbsp;\n\n### Method 2\n\nAnother option to resolve the issue is to allow the end users to register consent for Apps on their own, as described in [this Microsoft article](https://docs.microsoft.com/en-us/azure/active-directory/manage-apps/configure-user-consent-groups?tabs=azure-portal).\n\n!!! warning \"Important\"\n    If this method is used, the end users will be able to register consent for **any** third party Apps; for some enterprises such setup might contradict general Office Apps security policies\n\n&nbsp;\n\n**1\\.** Log in to Azure AD with Admin credentials\n\n**2\\.** Go to **Enterprise applications** > **User settings**\n\n**3\\.** Switch the setting \"*User can consent to apps accessing company data on their behalf*\" to **Yes**\n\n<p>\n    <img src=\"..\\..\\assets\\images\\Troubleshooting\\need-approval9.png\">\n</p>\n\n&nbsp;\n\nEnabling of the setting \"*User can consent to apps accessing company data for the groups they own*\" is optional.\n\nNow all users can consent to SSI accessing company data on their behalf without Admin approval.\n\n&nbsp;\n\n&nbsp;\n\n**Also see the following articles for more information:**  \n\n[Microsoft Consent framework](https://docs.microsoft.com/en-us/azure/active-directory/develop/consent-framework)\n\n[Microsoft App Consent Experience](https://docs.microsoft.com/en-us/azure/active-directory/develop/application-consent-experience)\n\n&nbsp;\n\n&nbsp;",
    "text_content": "How to Resolve the \"Need Admin Approval\" Error\nThe \"Need Admin Approval\" error may occur when a standard user attempts to authenticate their Office 365 mailbox into SSI:\n \n \n \n!!! warning \"Important\"\n An important server-side prerequisite must be clarified with your local Admin or SSI Support team. To be able to authenticate access, your company's Office 365 server must have a valid MPN ID from Microsoft. If no MPN ID is configured, SSI App might be regarded as unverified, and for this reason, it will not be listed among access consent Apps in Admin settings\nThe error is caused by User permission settings in corporate MS Azure Active Directory, where the option \"User can consent to apps accessing company data on their behalf\" is set to \"No\", along with its derivative setting for accessing the groups' data. \nThese settings are located in All services > Enterprise applications > User settings in MS Azure Active Directory.\n \n \n \nProblem solutions\nMethod 1\nTo resolve the issue, the local Office 365 Admin can consent for the App on the initial login. This method requires the O365 Admin to be an SAP Cloud for Customer user also provisioned as an SSI user.\nAdmin should perform the following configuration actions:\n1. Log in to SAP Cloud for Customer with Office 365 Admin account credentials\n2. Go to E-Mail Integration (1) > User Settings (2) > Sync Settings (3) > E-Mail Configuration (4) and click Change (5) in the bottom right corner\n \n \n \n3. A standard Office 365 OAuth dialog will be opened in your browser. Log in with Office 365 Admin credentials\n4. In the following \"Permissions Requested\" dialog window, select the checkbox Consent on behalf of your organization and click Accept\n \n \n \n5. You will see a confirmation message \"Signed in successfully\"\nNow consent to use the App has been granted for the whole Office 365 Org, and all end users can authenticate their Office 365 mailbox into SSI.\nAn optional extra step:\nIn case Office 365 Admin does not intend to use Server-Side Integration afterward, a \"Reset mailbox\" procedure can be executed for their account in SSI \"Groupware Settings\" tab, or they can be unprovisioned from SSI.\nMethod 2\nAnother option to resolve the issue is to allow the end users to register consent for Apps on their own, as described in this Microsoft article.\n!!! warning \"Important\"\n If this method is used, the end users will be able to register consent for any third party Apps; for some enterprises such setup might contradict general Office Apps security policies\n1. Log in to Azure AD with Admin credentials\n2. Go to Enterprise applications > User settings\n3. Switch the setting \"User can consent to apps accessing company data on their behalf\" to Yes\n \n \n \nEnabling of the setting \"User can consent to apps accessing company data for the groups they own\" is optional.\nNow all users can consent to SSI accessing company data on their behalf without Admin approval.\nAlso see the following articles for more information: \nMicrosoft Consent framework\nMicrosoft App Consent Experience"
}